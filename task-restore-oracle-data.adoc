---
sidebar: sidebar 
permalink: task-restore-oracle-data.html 
keywords: restore, Azure, Amazon Web services, Oracle database 
summary: Oracle データベースをクラウドからオンプレミスの SnapCenter サーバにリストアできます。 
---
= Oracle データベースをリストアします
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Oracleデータベースは元の場所にリストアすることも、別の場所にリストアすることもできます。RACデータベースの場合、バックアップが作成されたオンプレミスノードにデータがリストアされます。

制御ファイルのリストアを含むフルデータベースのみがサポートされます。アーカイブログが AFS 内にない場合は、リカバリに必要なアーカイブログが格納されている場所を指定する必要があります。


IMPORTANT: single File Restore（SFR；単一ファイルリストア）はサポートされません。

* 手順 *

. BlueXP UIで、[*保護*>*バックアップとリカバリ*>*アプリケーション*]をクリックします。
. [ * フィルター条件 * ] フィールドで、フィルター * タイプ * を選択し、ドロップダウンから [* Oracle* ] を選択します。
. リストアするデータベースに対応する *View Details* をクリックし、 *Restore* をクリックします。
. [Restore options]ページで、データベースファイルをリストアする場所を指定します。
+
|===
| 状況 | 手順 


 a| 
元の場所にリストアします
 a| 
.. [元の場所にリストア]*を選択します。
.. スナップショットがアーカイブストレージにある場合は、アーカイブストレージからデータをリストアする優先度を選択します。
.. 「 * 次へ * 」をクリックします。
.. データベースの状態をリストアおよびリカバリ処理の実行に必要な状態に変更する場合は、「* Database State *」を選択します。
+
データベースの状態は、高いレベルから順に、オープン、マウント済み、開始、シャットダウンがあります。

+
*** データベースの状態が上位で、リストア処理を実行するために下位の状態に変更する必要がある場合は、このチェックボックスを選択する必要があります。
*** リストア処理を実行するために、データベースの状態を低いレベルから高いレベルに変更する必要がある場合は、このチェックボックスをオンにしなくても自動的に状態が変更されます。
*** データベースが OPEN 状態で、リストアのためにデータベースが MOUNTED 状態である必要がある場合、データベースの状態はこのチェックボックスをオンにした場合にのみ変更されます。


.. リカバリの範囲を指定します。
+
*** 最後のトランザクションまでリカバリする場合は、*[すべてのログ]*を選択します。
*** 特定のSCNにリカバリする場合は、* Until SCN（System Change Number）*を選択します。
*** 特定のデータと時刻にリカバリする場合は、*[日付と時刻]*を選択します。
+
データベースホストのタイムゾーンの日付と時刻を指定する必要があります。

*** リカバリしない場合は*[リカバリなし]*を選択します。


.. アーカイブログがアクティブファイルシステムにない場合は、リカバリに必要なアーカイブログを格納する場所を指定する必要があります。
.. リカバリ後にデータベースを開く場合は、チェックボックスを選択します。
+
RAC セットアップでは、リカバリに使用される RAC インスタンスのみがリカバリ後に開きます。





 a| 
別のストレージに一時的にリストアし、リストアしたファイルを元の場所にコピーします
 a| 
.. [元の場所にリストア]*を選択します。
.. スナップショットがアーカイブストレージにある場合は、アーカイブストレージからデータをリストアする優先度を選択します。
.. [保存場所の変更]*を選択します。
+
[ストレージの場所の変更]*を選択した場合は、デスティネーションボリュームにサフィックスを追加できます。このチェックボックスをオンにしていない場合、デフォルトではデスティネーションボリュームに*_restore *が追加されます。

.. 「 * 次へ * 」をクリックします。
.. [ストレージマッピング]ページで、オブジェクトストアからリストアしたデータを一時的に格納する代替ストレージの場所の詳細を指定します。
+
オンプレミスのONTAPシステムを選択し、オブジェクトストレージへのクラスタ接続を設定していない場合は、オブジェクトストアに関する追加情報の入力を求められます。

.. 「 * 次へ * 」をクリックします。
.. データベースの状態をリストアおよびリカバリ処理の実行に必要な状態に変更する場合は、「* Database State *」を選択します。
+
データベースの状態は、高いレベルから順に、オープン、マウント済み、開始、シャットダウンがあります。

+
*** データベースの状態が上位で、リストア処理を実行するために下位の状態に変更する必要がある場合は、このチェックボックスを選択する必要があります。
*** リストア処理を実行するために、データベースの状態を低いレベルから高いレベルに変更する必要がある場合は、このチェックボックスをオンにしなくても自動的に状態が変更されます。
*** データベースが OPEN 状態で、リストアのためにデータベースが MOUNTED 状態である必要がある場合、データベースの状態はこのチェックボックスをオンにした場合にのみ変更されます。


.. リカバリの範囲を指定します。
+
*** 最後のトランザクションまでリカバリする場合は、*[すべてのログ]*を選択します。
*** 特定のSCNにリカバリする場合は、* Until SCN（System Change Number）*を選択します。
*** 特定のデータと時刻にリカバリする場合は、*[日付と時刻]*を選択します。
+
データベースホストのタイムゾーンの日付と時刻を指定する必要があります。

*** リカバリしない場合は*[リカバリなし]*を選択します。


.. アーカイブログがアクティブファイルシステムにない場合は、リカバリに必要なアーカイブログを格納する場所を指定する必要があります。
.. リカバリ後にデータベースを開く場合は、チェックボックスを選択します。
+
RAC セットアップでは、リカバリに使用される RAC インスタンスのみがリカバリ後に開きます。





 a| 
別の場所にリストアする
 a| 
.. [別の場所にリストアする]*を選択します。
.. スナップショットがアーカイブストレージにある場合は、アーカイブストレージからデータをリストアする優先度を選択します。
.. 代替ストレージにリストアする場合は、次の手順を実行します。
+
... [保存場所の変更]*を選択します。
+
[ストレージの場所の変更]*を選択した場合は、デスティネーションボリュームにサフィックスを追加できます。このチェックボックスをオンにしていない場合、デフォルトではデスティネーションボリュームに*_restore *が追加されます。

... 「 * 次へ * 」をクリックします。
... [ストレージマッピング]ページで、オブジェクトストアのデータをリストアする代替ストレージの場所の詳細を指定します。


.. 「 * 次へ * 」をクリックします。
.. [Destination host]ページで、データベースをマウントするホストを選択します。
+
... （オプション）NAS環境の場合は、オブジェクトストアからリストアしたボリュームのエクスポート先となるホストのFQDNまたはIPアドレスを指定します。
... （オプション）SAN環境の場合は、オブジェクトストアからリストアしたボリュームのLUNをマッピングするホストのイニシエータを指定します。


.. 「 * 次へ * 」をクリックします。


|===
. 詳細を確認して、 * リストア * をクリックします。


.結果
[別の場所にリストア]オプションを指定すると、選択したバックアップが指定したホストにマウントされます。データベースは手動で起動する必要があります。

マウントしたバックアップは、アンマウントするまで再マウントできません。UIの* Unmount *オプションを使用して、バックアップをアンマウントできます。

Oracleデータベースを起動する方法については、を参照してください。 https://kb.netapp.com/Advice_and_Troubleshooting/Cloud_Services/Cloud_Manager/How_to_bring_up_Oracle_Database_in_another_NFS_host_after_mounting_storage_from_backup_in_Cloud_Backup_for_Applications["ナレッジベースの記事"]。


NOTE: リストア処理が完了しない場合は、ジョブモニタにリストア処理が失敗したことが表示されるまで、リストアプロセスを再試行しないでください。ジョブモニタにリストア処理が失敗したことが表示される前にリストアプロセスを再試行すると、リストア処理は再び失敗します。ジョブモニタのステータスが「Failed」と表示されたら、リストアプロセスを再試行できます。
