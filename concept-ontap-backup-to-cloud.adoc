---
sidebar: sidebar 
permalink: concept-ontap-backup-to-cloud.html 
keywords: backing up, restoring, back up, backup, restore, cloud volumes ontap, aws, azure, s3, blob, google cloud, storagegrid, back up volumes, cloud backup, restore volumes, billing, cost, on-premises ontap, onprem 
summary: BlueXPのバックアップとリカバリサービスは、ONTAP クラスタデータの保護と長期アーカイブのためのバックアップとリストア機能を提供します。バックアップは、ほぼ期間のリカバリやクローニングに使用されるボリューム Snapshot コピーとは関係なく、パブリックまたはプライベートのクラウドアカウントのオブジェクトストアに自動的に生成されて格納されます。 
---
= BlueXPのバックアップとリカバリを使用してONTAP クラスタのデータを保護します
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
BlueXPのバックアップとリカバリサービスは、ONTAP クラスタデータの保護と長期アーカイブのためのバックアップとリストア機能を提供します。バックアップは、ほぼ期間のリカバリやクローニングに使用されるボリューム Snapshot コピーとは関係なく、パブリックまたはプライベートのクラウドアカウントのオブジェクトストアに自動的に生成されて格納されます。

必要に応じて、バックアップから同じ作業環境または別の作業環境に、_volume_全体、a_folder_、または1つ以上の_files_をリストアできます。



== の機能

バックアップ機能：

* データボリュームの独立したコピーを低コストのオブジェクトストレージにバックアップできます。
* クラスタ内のすべてのボリュームに単一のバックアップポリシーを適用するか、または一意のリカバリポイント目標が設定されたボリュームに異なるバックアップポリシーを割り当てます。
* クラスタで今後作成されるすべてのボリュームに適用するバックアップポリシーを作成します。
* 書き換え不可のバックアップファイルを作成して、保持期間中にロックされて保護されるようにします。
* バックアップファイルをスキャンしてランサムウェア攻撃を受ける可能性があるかを調べ、感染したバックアップを自動的に削除/置換します。
* 古いバックアップファイルをアーカイブストレージに階層化してコストを削減します。
* ボリュームのバックアップを保持しながら不要なソースボリュームをアーカイブできるように、バックアップ関係を削除します。
* クラウドからクラウドへ、オンプレミスシステムからパブリッククラウドやプライベートクラウドへバックアップできます。
* Cloud Volumes ONTAP システムの場合、バックアップは別のサブスクリプションやアカウントに配置することも、別のリージョンに配置することもできます。
* バックアップデータは、転送中の AES-256 ビット暗号化と TLS 1.2 HTTPS 接続によって保護されます。
* クラウドプロバイダのデフォルトの暗号化キーを使用する代わりに、お客様が管理する独自のキーを使用してデータを暗号化します。
* 単一ボリュームで最大 4 、 000 個のバックアップがサポートされます。


リストア機能：

* 特定の時点からデータをリストアします。
* ボリューム、フォルダ、または個々のファイルをソースシステムまたは別のシステムにリストアする。
* 別のサブスクリプション / アカウントを使用して、または別のリージョンにある作業環境にデータをリストアする。
* データはブロックレベルでリストアされ、元のACLを維持したまま、指定した場所に直接データが配置されます。
* 単一ファイルのリストア用に個 々 のフォルダやファイルを簡単に選択できる、参照可能で検索可能なファイルカタログです。




== サポート対象の ONTAP 作業環境およびオブジェクトストレージプロバイダ

BlueXPのバックアップとリカバリでは、ONTAP ボリュームを次の作業環境から次のパブリック/プライベートクラウドプロバイダのオブジェクトストレージにバックアップできます。

[cols="50,50"]
|===
| ソースの作業環境 | バックアップファイルデスティネーションifdef：aws [] 


| AWS の Cloud Volumes ONTAP | Amazon S3 endif：aws []ifdef：azure[] 


| Azure の Cloud Volumes ONTAP | Azure Blob endif：Azure[] ifdef：GCP [] 


| Google の Cloud Volumes ONTAP | Google Cloud Storage endif：GCP [] 


| オンプレミスの ONTAP システム | ifdef：aws [] Amazon S3 endif：aws [] ifdef：azure[] Azure Blob endif：azure [] ifdef：gcp [] Google Cloud Storage endif：GCP [] NetApp StorageGRID 
|===
ONTAP バックアップファイルから次の作業環境にボリューム、フォルダ、または個々のファイルをリストアできます。

[cols="50,50"]
|===
| バックアップファイルの場所 | デスティネーション作業環境ifdef：aws [] 


| Amazon S3 | AWSオンプレミスONTAP システムのCloud Volumes ONTAP 。endif：aws [] ifdef：azure[] 


| Azure Blob の略 | AzureオンプレミスONTAP システムのCloud Volumes ONTAP 。endif：azure[] ifdef：gCP[] 


| Google クラウドストレージ | GoogleオンプレミスONTAP システムのCloud Volumes ONTAP ：GCP[] 


| NetApp StorageGRID | オンプレミスの ONTAP システム 
|===
「オンプレミス ONTAP システム」とは、 FAS 、 AFF 、 ONTAP Select の各システムを指します。



=== 接続が制限されているサイトのサポート

BlueXPのバックアップとリカバリは、インターネット接続が制限されているサイト（「制限モード」とも呼ばれます）でボリュームデータのバックアップとリストアに使用できます。この場合は、制限されたリージョンにBlueXP Connectorを導入する必要があります。

ifdef::aws[]

* AWSの商用リージョンにインストールされているCloud Volumes ONTAP システムからAmazon S3にデータをバックアップできます。を参照してください link:task-backup-to-s3.html["Amazon S3 への Cloud Volumes ONTAP データのバックアップ"]。


endif::aws[]

ifdef::azure[]

* Azureの商用リージョンにインストールされているCloud Volumes ONTAP システムからAzure Blobにデータをバックアップできます。を参照してください link:task-backup-to-azure.html["Cloud Volumes ONTAP データをAzure Blobにバックアップしています"]。


endif::azure[]



=== インターネットに接続されていないサイトをサポート

インターネットに接続されていないサイト（「プライベートモード」または「ダーク」サイトとも呼ばれます）では、BlueXPのバックアップとリカバリを使用してボリュームデータをバックアップできます。この場合は、BlueXP Connectorをプライベートモードで導入する必要があります。

* ローカルのオンプレミスONTAP システムからローカルのStorageGRID システムにデータをバックアップできます。を参照してください link:task-backup-onprem-private-cloud.html["オンプレミスの ONTAP データの StorageGRID へのバックアップ"] を参照してください。ifdef：aws []


endif::aws[]

ifdef::azure[]

endif::azure[]



== サポートされるボリューム

BlueXPのバックアップとリカバリでは、次のタイプのボリュームがサポートされます。

* FlexVol 読み書き可能ボリューム
* SnapMirrorデータ保護（DP）デスティネーションボリューム
* SnapLock Enterpriseボリューム（ONTAP 9.11.1以降が必要）
+
** SnapLock Complianceボリュームは、現在のところサポートされていません。


* FlexGroup ボリューム（ONTAP 9.12.1以降が必要）


の項を参照してください <<制限,Backup and Restoreの制限事項>> を参照してください。



== コスト

ONTAP システムでBlueXPのバックアップとリカバリを使用すると、リソース料金とサービス料金の2種類のコストが発生します。

* リソース料金 *

リソース料金は、オブジェクトストレージの容量、クラウドへのバックアップファイルの書き込みと読み取りのために、クラウドプロバイダに支払われます。

* バックアップでは、クラウドプロバイダにオブジェクトストレージのコストを支払います。
+
BlueXPのバックアップとリカバリではソースボリュームのストレージ効率化が維持されるため、クラウドプロバイダのオブジェクトストレージのコストであるdata_after_ ONTAP 効率化（重複排除と圧縮を適用したあとのデータ量が少ない場合）を支払う必要があります。

* 検索とリストアを使用してデータをリストアする場合、クラウドプロバイダによって特定のリソースがプロビジョニングされ、検索要求でスキャンされるデータ量には1TiBあたりのコストが関連付けられます。（これらのリソースは参照と復元には必要ありません）。
+
ifdef::aws[]

+
** AWSでは、 https://aws.amazon.com/athena/faqs/["Amazon Athena"^] および https://aws.amazon.com/glue/faqs/["AWS 接着剤"^] リソースは新しいS3バケットに導入される。
+
endif::aws[]



+
ifdef::azure[]

+
** Azureのでは https://azure.microsoft.com/en-us/services/synapse-analytics/?&ef_id=EAIaIQobChMI46_bxcWZ-QIVjtiGCh2CfwCsEAAYASAAEgKwjvD_BwE:G:s&OCID=AIDcmm5edswduu_SEM_EAIaIQobChMI46_bxcWZ-QIVjtiGCh2CfwCsEAAYASAAEgKwjvD_BwE:G:s&gclid=EAIaIQobChMI46_bxcWZ-QIVjtiGCh2CfwCsEAAYASAAEgKwjvD_BwE["Azure Synapseワークスペース"^] および https://azure.microsoft.com/en-us/services/storage/data-lake-storage/?&ef_id=EAIaIQobChMIuYz0qsaZ-QIVUDizAB1EmACvEAAYASAAEgJH5fD_BwE:G:s&OCID=AIDcmm5edswduu_SEM_EAIaIQobChMIuYz0qsaZ-QIVUDizAB1EmACvEAAYASAAEgJH5fD_BwE:G:s&gclid=EAIaIQobChMIuYz0qsaZ-QIVUDizAB1EmACvEAAYASAAEgJH5fD_BwE["Azure Data Lake Storageの略"^] データの格納と分析を行うためにストレージアカウントにプロビジョニングします。
+
endif::azure[]





ifdef::gcp[]

* Googleでは、新しいバケットが導入され、が展開されます https://cloud.google.com/bigquery["Google Cloud BigQueryサービス"^] アカウント/プロジェクトレベルでプロビジョニングされます。


endif::gcp[]

* アーカイブストレージに移動されたバックアップファイルからボリュームデータをリストアする必要がある場合は、GiB単位の読み出し料金とクラウドプロバイダからの要求ごとの料金が別途かかります。


* サービス料金 *

サービス料金はネットアップに支払われ、バックアップの作成時とリストア時のボリューム、またはファイルに対する費用の両方が含まれます。保護するデータの料金は、オブジェクトストレージにバックアップされる ONTAP のソースの使用済み論理容量（ _Before_ONTAP 効率化）で計算されます。この容量はフロントエンドテラバイト（ FETB ）とも呼ばれます。

バックアップサービスの料金を支払う方法は 3 通りあります。1 つ目は、クラウドプロバイダを利用して月額料金を支払う方法です。2つ目のオプションは、年間契約を取得することです。3 つ目のオプションは、ネットアップからライセンスを直接購入することです。を参照してください <<ライセンス,ライセンス>> 詳細については、を参照してください



== ライセンス

BlueXPのバックアップとリカバリには、次の消費モデルがあります。

* * BYOL *：ネットアップから購入したライセンス。任意のクラウドプロバイダで使用できます。
* * PAYGO *：クラウドプロバイダの市場から1時間ごとのサブスクリプション。
* * Annual *：クラウドプロバイダの市場から年間契約。


[NOTE]
====
ネットアップからBYOLライセンスを購入した場合は、クラウドプロバイダのマーケットプレイスからPAYGOの提供にもサブスクライブする必要があります。ライセンスは常に最初に請求されますが、次の場合は、マーケットプレイスで 1 時間ごとの料金が請求されます。

* ライセンス容量を超えた場合
* ライセンスの期間が終了する場合


市場で年間契約を結んでいるパートナー様の場合、BlueXPのバックアップとリカバリの消費量はすべてその契約に基づいて請求されます。BYOLでは、年単位のマーケットプレイス契約を組み合わせることはできません。

====


=== お客様所有のライセンスを使用

BYOL は期間ベース（ 12 カ月、 24 カ月、 36 カ月）の _ 容量ベースであり、 1TiB 単位で提供されます。ネットアップに料金を支払って、 1 年分のサービスを使用し、最大容量を指定した場合は「 10TiB 」とします。

サービスを有効にするためにBlueXPのデジタルウォレットページに入力したシリアル番号が表示されます。いずれかの制限に達すると、ライセンスを更新する必要があります。Backup BYOL ライセンス環境 では、に関連付けられているすべてのソースシステムがライセンスされます https://docs.netapp.com/us-en/cloud-manager-setup-admin/concept-netapp-accounts.html["BlueXPアカウント"^]。

link:task-licensing-cloud-backup.html#use-a-bluexp-backup-and-recovery-byol-license["BYOL ライセンスの管理方法について説明します"]。



=== 従量課金制のサブスクリプション

BlueXPのバックアップとリカバリは、従量課金制モデルで従量課金制のライセンスを提供します。クラウドプロバイダの市場に登録すると、バックアップしたデータに対して1 GiB単位で料金が発生し、前払いによる支払いが発生しなくなります。クラウドプロバイダから月額料金で請求されます。

link:task-licensing-cloud-backup.html#use-a-bluexp-backup-and-recovery-paygo-subscription["従量課金制サブスクリプションの設定方法について説明します"]。

PAYGOサブスクリプションに最初にサインアップしたときに、30日間の無償トライアルを利用できます。



=== 年間契約

ifdef::aws[]

AWSを使用している場合は、次の2年間の契約が12カ月、24カ月、または36カ月間利用できます。

* Cloud Volumes ONTAP データとオンプレミスの ONTAP データをバックアップできる「クラウドバックアップ」プラン。
* Cloud Volumes ONTAP とBlueXPのバックアップとリカバリをバンドルできる「CVO Professional」プランこれには、このライセンスに基づいて Cloud Volumes ONTAP ボリュームのバックアップが無制限になることも含まれます（バックアップ容量はライセンスにはカウントされません）。


endif::aws[]

ifdef::azure[]

* Azureを使用している場合は、ネットアップにプライベートオファーをリクエストし、BlueXPのバックアップとリカバリのアクティブ化中にAzure Marketplaceからサブスクリプションを登録する際にプランを選択できます。


endif::azure[]

ifdef::gcp[]

* GCPを使用している場合は、ネットアップにプライベートオファーをリクエストし、BlueXPのバックアップとリカバリのアクティブ化中にGoogle Cloud Marketplaceからサブスクリプションを登録する際にプランを選択できます。


endif::gcp[]

link:task-licensing-cloud-backup.html#use-an-annual-contract["年間契約の設定方法について説明します"]。



== BlueXPのバックアップとリカバリの仕組み

Cloud Volumes ONTAP またはオンプレミスのONTAP システムでBlueXPのバックアップとリカバリを有効にすると、データのフルバックアップが実行されます。ボリューム Snapshot はバックアップイメージに含まれません。初期バックアップ後は、追加のバックアップはすべて差分になります。つまり、変更されたブロックと新しいブロックのみがバックアップされます。これにより、ネットワークトラフィックを最小限に抑えることができます。BlueXPのバックアップとリカバリは、上に構築されています https://docs.netapp.com/us-en/ontap/concepts/snapmirror-cloud-backups-object-store-concept.html["NetApp SnapMirror Cloudテクノロジ"^]。


CAUTION: クラウドプロバイダ環境からバックアップファイルの管理や変更を直接行うと、ファイルが破損してサポートされない構成になる可能性があります。

次の図は、各コンポーネント間の関係を示しています。

image:diagram_cloud_backup_general.png["BlueXPのバックアップおよびリカバリが、ソースシステム上のボリュームおよびバックアップファイルが配置されているデスティネーションオブジェクトストレージとどのように通信するかを示す図。"]



=== バックアップの保管場所

バックアップコピーは、BlueXPがクラウドアカウントで作成したオブジェクトストアに格納されます。クラスタ/作業環境ごとに1つのオブジェクトストアがあり、BlueXPではオブジェクトストアに「NetApp-backup-clusteruuid」という名前が付けられます。このオブジェクトストアは削除しないでください。

ifdef::aws[]

* AWSでは、BlueXPによってが有効になります https://docs.aws.amazon.com/AmazonS3/latest/dev/access-control-block-public-access.html["Amazon S3 ブロックのパブリックアクセス機能"^] を S3 バケットに配置します。


endif::aws[]

ifdef::azure[]

* Azureでは、BlueXPは、BLOBコンテナ用のストレージアカウントを持つ新規または既存のリソースグループを使用します。BlueXP https://docs.microsoft.com/en-us/azure/storage/blobs/anonymous-read-access-prevent["BLOB データへのパブリックアクセスをブロックします"] デフォルトでは


endif::azure[]

ifdef::gcp[]

* GCPでは、Google Cloud Storageバケット用のストレージアカウントを持つ新規または既存のプロジェクトを使用します。


endif::gcp[]

* StorageGRID では、オブジェクトストアバケットに既存のストレージアカウントが使用されます。


あとでクラスタのデスティネーションオブジェクトストアを変更する場合は、が必要になります link:task-manage-backups-ontap.html#unregistering-bluexp-backup-and-recovery-for-a-working-environment["作業環境のBlueXPバックアップとリカバリの登録を解除します"^]をクリックし、新しいクラウドプロバイダ情報を使用してBlueXPのバックアップとリカバリを有効にします。



=== カスタマイズ可能なバックアップスケジュールと保持設定

作業環境でBlueXPのバックアップとリカバリを有効にすると、最初に選択したすべてのボリュームが定義したデフォルトのバックアップポリシーを使用してバックアップされます。Recovery Point Objective（RPO；目標復旧時点）が異なる特定のボリュームに異なるバックアップポリシーを割り当てる場合は、BlueXPのバックアップとリカバリがアクティブ化されたあとに、そのクラスタ用の追加のポリシーを作成してそれらのポリシーを他のボリュームに割り当てることができます。

すべてのボリュームについて、毎時、毎日、毎週、毎月、および毎年のバックアップの組み合わせを選択できます。ボリュームに適用するSnapshotポリシーは、BlueXPのバックアップとリカバリで認識されるいずれかのポリシーである必要があります。そうでない場合、バックアップファイルは作成されません。また、システム定義のポリシーの中から、 3 カ月、 1 年、 7 年のバックアップと保持を提供するポリシーを選択することもできます。ポリシーは次のとおりです。

[cols="35,16,16,16,26"]
|===
| バックアップポリシー名 3+| 間隔ごとのバックアップ ... | 最大バックアップ 


|  | * 毎日 * | * 毎週 * | * 毎月 * |  


| Netapp3MonthsRetention | 30 | 13 | 3. | 46 


| Netapp1YearRetention | 30 | 13 | 12. | 55 


| ネッパ7YearsRetention | 30 | 53 | 84 | 167 
|===
ONTAP System Manager または ONTAP CLI を使用してクラスタに作成したバックアップ保護ポリシーも選択内容として表示されます。これには、カスタムのSnapMirrorラベルを使用して作成したポリシーも含まれ

カテゴリまたは間隔のバックアップの最大数に達すると、古いバックアップは削除されるため、常に最新のバックアップが保持されます（そのため、廃止されたバックアップはクラウドのスペースを消費し続けることはありません）。

を参照してください link:concept-cloud-backup-policies.html#backup-schedules["バックアップスケジュール"^] 使用可能なスケジュールオプションの詳細については、を参照してください。

できることに注意してください link:task-manage-backups-ontap.html#creating-a-manual-volume-backup-at-any-time["ボリュームのオンデマンドバックアップを作成する"] スケジュールバックアップから作成されたバックアップファイルに加え、いつでも Backup Dashboard からアクセスできます。


TIP: データ保護ボリュームのバックアップの保持期間は、ソースの SnapMirror 関係の定義と同じです。API を使用して必要に応じてこの値を変更できます。



=== バックアップファイルの保護設定

クラスタがONTAP 9.11.1以降を使用している場合、バックアップを削除攻撃やランサムウェア攻撃から保護できます。各バックアップポリシーでは、特定の期間にわたってバックアップファイルに適用可能な_DataLockとRansomware Protection_の セクションを提供しています。_DataLock_は'バックアップファイルの変更または削除を防止します_Ransomware protection_scanバックアップファイルをスキャンして、バックアップファイルの作成時とバックアップファイルのデータのリストア時にランサムウェア攻撃が発生した証拠を探します。

バックアップの保持期間は、バックアップスケジュールの保持期間と同じに14日を足したものです。たとえば、_WEEKLY_BACKUPに_5_Copiesを適用すると、各バックアップファイルが5週間ロックされます。_6_個のコピーを保持したMonthly _バックアップは、各バックアップ・ファイルを6か月ロックします。

バックアップデスティネーションがAmazon S3、Azure Blob、NetApp StorageGRID の場合、現在サポートされています。その他のストレージプロバイダの送信先は今後のリリースで追加される予定です。

を参照してください link:concept-cloud-backup-policies.html#datalock-and-ransomware-protection["DataLockとランサムウェアによる保護"^] DataLockとランサムウェアによる保護の仕組みの詳細については、こちらをご覧ください。


TIP: アーカイブストレージにバックアップを階層化する場合は、DataLockを有効にできません。



=== 古いバックアップファイル用のアーカイブストレージ

特定のクラウドストレージを使用している場合、一定期間経過した古いバックアップファイルを低コストのストレージクラス/アクセス階層に移動できます。DataLockを有効にした場合は、アーカイブストレージを使用できません。

ifdef::aws[]

* AWS では、バックアップは _Standard_storage クラスから開始し、 30 日後に _Standard-Infrequent Access_storage クラスに移行します。
+
クラスタでONTAP 9.10.1以降を使用している場合は、BlueXPのバックアップとリカバリ用UIで、一定の日数が経過したら古いバックアップを_S3 Glacier_or_S3 Glacier Deep Archive_storageに階層化してコストをさらに最適化できます。 link:reference-aws-backup-tiers.html["AWS アーカイブストレージの詳細は、こちらをご覧ください"^]。



endif::aws[]

ifdef::azure[]

* Azure では、バックアップは _COOL アクセス層に関連付けられます。
+
クラスタでONTAP 9.10.1以降を使用している場合は、コストをさらに最適化するために、BlueXPのバックアップとリカバリのUIで、古いバックアップを_azure Archive_storageに階層化することができます。 link:reference-azure-backup-tiers.html["Azure アーカイブストレージの詳細については、こちらをご覧ください"^]。



endif::azure[]

ifdef::gcp[]

* GCP では、バックアップは _Standard_storage クラスに関連付けられます。
+
クラスタでONTAP 9.12.1以降を使用している場合は、コストをさらに最適化するために、BlueXPのバックアップとリカバリのUIで、古いバックアップを_Archive_storageに階層化することができます。 link:reference-google-backup-tiers.html["Googleアーカイブストレージの詳細をご覧ください"^]。



endif::gcp[]

* StorageGRID では、バックアップは _Standard_storage クラスに関連付けられます。
+
オンプレミスクラスタがONTAP 9.12.1以降を使用しており、StorageGRID システムが11.4以降を使用している場合は、古いバックアップファイルを特定の日数後にパブリッククラウドアーカイブストレージにアーカイブできます。現在、AWS S3 Glacier Deep ArchiveまたはAzure Archiveストレージ階層がサポートされています。 link:task-backup-onprem-private-cloud.html#preparing-to-archive-older-backup-files-to-public-cloud-storage["StorageGRID からバックアップファイルをアーカイブする方法の詳細については、こちらをご覧ください"^]。



を参照してください link:concept-cloud-backup-policies.html#archival-storage-settings["アーカイブストレージの設定"] 古いバックアップファイルのアーカイブの詳細については、を参照してください。



== FabricPool 階層化ポリシーに関する考慮事項

バックアップするボリュームがFabricPool アグリゲートに配置されていて、に以外のポリシーが割り当てられている場合に注意する必要がある事項があります `none`：

* FabricPool 階層化ボリュームの最初のバックアップでは、（オブジェクトストアからの）ローカルおよびすべての階層化データを読み取る必要があります。バックアップ処理では、オブジェクトストレージに階層化されたコールドデータは「再加熱」されません。
+
この処理を実行すると、クラウドプロバイダからデータを読み取るコストが 1 回だけ増加する可能性があります。

+
** 2 回目以降のバックアップは増分バックアップとなるため、影響はありません。
** ボリュームの作成時に階層化ポリシーが割り当てられていた場合、この問題は表示されません。


* を割り当てる前に、バックアップによる影響を考慮してください `all` ボリュームへの階層化ポリシー。データはすぐに階層化されるため、BlueXPのバックアップとリカバリでは、ローカル階層ではなくクラウド階層からデータが読み取られます。バックアップの同時処理は、クラウドオブジェクトストレージへのネットワークリンクを共有するため、ネットワークリソースが最大限まで使用されなくなった場合にパフォーマンスが低下する可能性があります。この場合、複数のネットワークインターフェイス（ LIF ）をプロアクティブに設定して、この種類のネットワークの飽和を軽減することができます。




== 制限



=== バックアップの制限

* ポリシーにボリュームが割り当てられていない場合にバックアップポリシーを作成または編集するときは、バックアップの保持数を 1018 以下にする必要があります。ポリシーにボリュームを割り当てたら、ポリシーを編集して最大4、000個のバックアップを作成できます。
* DP ボリュームをバックアップする場合は、次の点に注意してください。
+
** SnapMirrorラベルが設定された関係 `app_consistent` および `all_source_snapshot` クラウドにバックアップできない。
** SnapMirrorデスティネーションボリュームでSnapshotのローカルコピーを作成する場合（使用するSnapMirrorラベルに関係なく）、これらのSnapshotはバックアップとしてクラウドに移動されません。この時点で、BlueXPのバックアップとリカバリでソースDPボリュームをバックアップできるように、目的のラベルを指定したSnapshotポリシーをソースDPボリュームに作成する必要があります。


* FlexGroup ボリュームのバックアップをアーカイブストレージに移動することはできません。
* FlexGroup ボリュームのバックアップでは、DataLockやランサムウェア対策は使用できません。
* SVM-DR ボリュームバックアップは、次の制限事項でサポートされます。
+
** バックアップは ONTAP セカンダリからのみサポートされます。
** ボリュームに適用されるSnapshotポリシーは、BlueXPのバックアップとリカバリで認識されるポリシー（日次、週次、月次など）のいずれかである必要があります デフォルトの「sm_created」ポリシー（*[すべてのSnapshotをミラーリング]*に使用）は認識されず、バックアップ可能なボリュームのリストにDPボリュームは表示されません。




* MetroCluster のサポート：
+
** ONTAP 9.12.1 GA以降を使用している場合は、プライマリシステムに接続されているときにバックアップがサポートされます。バックアップ構成全体がセカンダリシステムに転送されるため、スイッチオーバー後もクラウドへのバックアップが自動的に続行されます。セカンダリシステムにバックアップを設定する必要はありません（実際には、セットアップは制限されています）。
** ONTAP 9.12.0以前のバージョンでは、ONTAP セカンダリ・システムからのみバックアップがサポートされます。
** 現時点では、FlexGroup ボリュームのバックアップはサポートされていません。


* [今すぐバックアップ]ボタンを使用したアドホック・ボリューム・バックアップは'データ保護ボリュームではサポートされていません
* SM-BC 設定はサポートされません。
* ONTAP では、1つのボリュームから複数のオブジェクトストアへのSnapMirror関係のファンアウトはサポートされていません。そのため、この構成はBlueXPのバックアップおよびリカバリではサポートされていません。
* 現時点では、オブジェクトストアのWORM / ComplianceモードはAmazon S3、Azure、StorageGRID でサポートされています。これはDataLock機能と呼ばれ、クラウドプロバイダのインターフェイスではなく、BlueXPのバックアップとリカバリの設定を使用して管理する必要があります。




=== リストアの制限事項

これらの制限事項は、特に明記されていない限り、ファイルとフォルダをリストアするための検索とリストアおよび参照と復元の両方の方法に適用されます。

* ブラウズとリストアでは、一度に最大100個のファイルをリストアできます。
* 検索とリストアでは、一度に1つのファイルをリストアできます。
* ONTAP 9.13.0以降を使用している場合、[参照と復元]および[検索と復元]では、フォルダ内のすべてのファイルとサブフォルダとともにフォルダを復元できます。
+
9.11.1より前のバージョンのONTAP を使用している場合、リストア処理でリストアできるのは選択したフォルダとそのフォルダ内のファイルのみです。サブフォルダまたはサブフォルダ内のファイルはリストアされません。

+
9.11.1より前のバージョンのONTAP を使用している場合、フォルダのリストアはサポートされません。

* ディレクトリ/フォルダのリストアは、クラスタでONTAP 9.13.1以降が実行されている場合にのみアーカイブストレージに格納されたデータでサポートされます。
* DataLockを使用して保護されているデータについては、クラスタでONTAP 9.13.1以降が実行されている場合にのみ、ディレクトリ/フォルダのリストアがサポートされます。
* ディレクトリ/フォルダのリストアは、FlexGroup ボリュームのバックアップでは現在サポートされていません。
* FlexGroup ボリュームからFlexVol ボリューム、またはFlexVol ボリュームからFlexGroup ボリュームへのリストアはサポートされていません。
* リストアするファイルは、デスティネーションボリュームの言語と同じ言語を使用している必要があります。言語が異なる場合は、エラーメッセージが表示されます。
* AzureアーカイブストレージからStorageGRID システムにデータをリストアする場合、_High_restore優先度はサポートされません。

