---
sidebar: sidebar 
permalink: br-use-mssql-clone.html 
keywords: backing up, restoring, back up, backup, clone, restore, cloud volumes ontap, aws, azure, s3, blob, google cloud, storagegrid, back up volumes, cloud backup, restore volumes, cost, on-premises ontap, onprem, applications, virtual machines, backup and recovery 
summary: 開発、テスト、または保護の目的で、Microsoft SQL Server アプリケーション データをクローン化します。MicrosoftSQL Server ワークロードのインスタント スナップショットまたは既存のスナップショットからクローンを作成できます。 
---
= BlueXP backup and recoveryを使用して Microsoft SQL Server ワークロードをクローンする
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
BlueXP backup and recoveryを使用して、開発、テスト、または保護の目的で、Microsoft SQL Server アプリケーションデータを同じまたは別の VM にクローンできます。MicrosoftSQL Server ワークロードのインスタントスナップショットまたは既存のスナップショットからクローンを作成できます。

次のクローンの種類から選択します。

* *インスタントスナップショットとクローン*：インスタントスナップショットからMicrosoft SQL Serverワークロードのクローンを作成できます。インスタントスナップショットとは、バックアップから作成されたソースデータのポイントインタイムコピーです。クローンは、パブリッククラウドまたはプライベートクラウドアカウントのオブジェクトストアに保存されます。データの損失や破損が発生した場合、クローンを使用してワークロードを復元できます。
* *既存のスナップショットからのクローン作成*：ワークロードで利用可能なスナップショットのリストから、既存のスナップショットを選択できます。このオプションは、特定の時点からクローンを作成したい場合に便利です。クローン先はプライマリストレージまたはセカンダリストレージです。


次の保護目標を達成できます。

* クローンを作成する
* クローンを更新する
* クローンを分割する
* クローンを削除する


*必要なBlueXPロール* 組織管理者、フォルダーまたはプロジェクト管理者、バックアップおよびリカバリのスーパー管理者、またはバックアップおよびリカバリのクローン管理者のロール。  https://docs.netapp.com/us-en/bluexp-setup-admin/reference-iam-predefined-roles.html["すべてのサービスに対するBlueXPのアクセスロールについて学ぶ"^] 。



== クローンを作成する

Microsoft SQL Server ワークロードのクローンを作成できます。クローンとは、バックアップから作成されたソースデータのコピーです。クローンは、パブリッククラウドまたはプライベートクラウドアカウントのオブジェクトストアに保存されます。クローンを使用することで、データの損失や破損が発生した場合にワークロードを復元できます。

既存のスナップショットまたはインスタントスナップショットからクローンを作成できます。インスタントスナップショットは、バックアップから作成されたソースデータのポイントインタイムコピーです。クローンを使用することで、データの損失や破損が発生した場合にワークロードを復元できます。

.手順
. BlueXP backup and recoveryメニューから、[クローン] を選択します。
+
image:screen-br-sql-clone-nomenu.png["BlueXP backup and recoveryのクローンページのスクリーンショット"]

. *新しいクローンを作成*を選択します。
. クローンの種類を選択します:
+
** *既存のスナップショットからのクローン作成とデータベース更新*：クローン作成先のスナップショットを選択し、クローン作成オプションを設定します。これは、クローン作成先のスナップショットを選択し、オプションを設定する場合に便利です。
** *インスタントスナップショットとクローン*：ソースデータのスナップショットを今すぐ作成し、そのスナップショットからクローンを作成します。このオプションは、ソースワークロードの最新データからクローンを作成する場合に便利です。


. *データベース ソース* セクションを完了します。
+
** *単一クローンまたは一括クローン*：単一のクローンを作成するか、複数のクローンを作成するかを選択します。*一括クローン*を選択した場合、既に作成済みの保護グループを使用して、一度に複数のクローンを作成できます。このオプションは、異なるワークロード用に複数のクローンを作成する場合に便利です。
** *ソースデータベースのホスト、インスタンス、および名前*: クローンのソースデータベースのホスト、インスタンス、および名前を選択します。ソースデータベースは、クローンの作成元となるデータベースです。


. *データベース ターゲット* セクションを完了します。
+
** *ターゲットデータベースのホスト、インスタンス、および名前*: クローンのターゲットデータベースのホスト、インスタンス、および名前を選択します。ターゲットデータベースは、クローンが作成される場所です。
+
オプションとして、ターゲット名のドロップダウンリストから「*サフィックス*」を選択し、クローン先のデータベース名にサフィックスを追加します。サフィックスを指定しない場合、クローン先のデータベース名はソースデータベース名と同じになります。

** *QoS（最大スループット）*：クローンのQoS（サービス品質）最大スループット（MBps単位）を選択します。QoSは、最大スループットやIOPSなど、クローンのパフォーマンス特性を定義します。


. *マウント*セクションを完了します。
+
** *マウントポイントの自動割り当て*：このオプションを選択すると、クローンのマウントポイントが自動的に割り当てられます。マウントポイントとは、オブジェクトストア内でクローンがマウントされる場所です。
** *マウントポイントのパスを定義*: クローンのマウントポイントを入力します。マウントポイントは、オブジェクトストア内でクローンがマウントされる場所です。ドライブ文字を選択し、データファイルとログファイルのパスを入力してください。


. 「 * 次へ * 」を選択します。
. 復元ポイントを選択します:
+
** *既存のスナップショット*: ワークロードで利用可能なスナップショットのリストから既存のスナップショットを選択します。このオプションは、特定の時点からクローンを作成する場合に便利です。
** *インスタントスナップショットとクローン*：ワークロードで利用可能なスナップショットのリストから最新のスナップショットを選択します。このオプションは、ソースワークロードの最新データからクローンを作成する場合に便利です。


. *インスタント スナップショットとクローン*の作成を選択した場合は、クローンの保存場所を選択します。
+
** *ローカルストレージ*： ONTAPシステムのローカルストレージにクローンを作成するには、このオプションを選択します。ローカルストレージとは、 ONTAPシステムに直接接続されているストレージです。
** *セカンダリストレージ*： ONTAPシステムのセカンダリストレージにクローンを作成するには、このオプションを選択します。セカンダリストレージとは、バックアップおよびリカバリワークロードに使用されるストレージです。


. データとログの保存先を選択します。
. 「 * 次へ * 」を選択します。
. *詳細オプション*セクションを完了します。
+
image:screen-br-sql-clone-create-advanced.png["BlueXP backup and recoveryでクローンを作成するための詳細設定"]

. *インスタント スナップショットとクローン* を選択した場合は、次のオプションを完了します。
+
image:screen-br-sql-clone-create-instantsnapshot-advanced.png["BlueXP backup and recoveryでインスタントスナップショットとクローンを作成するための詳細設定"]

+
** *クローン更新スケジュールと有効期限*: *インスタントクローン*を選択した場合は、クローンの更新を開始する日付を入力します。クローンスケジュールは、クローンが作成されるタイミングを定義します。
+
*** *スケジュールの有効期限が切れたらクローンを削除*: クローンの有効期限が切れたらクローンを削除する場合。
*** *クローン更新間隔*：クローンを更新する頻度を選択します。1時間ごと、1日ごと、1週間ごと、1ヶ月ごと、または3ヶ月ごとに更新できます。このオプションは、クローンをソースワークロードに合わせて最新の状態に保ちたい場合に便利です。


** *プレスクリプトとポストスクリプト*: 必要に応じて、クローン作成の前後に実行するプレクローンスクリプトとポストクローンスクリプトを指定します。これらのスクリプトは、クローンの設定や通知の送信などの追加タスクを実行するために使用できます。
** *通知*: オプションで、クローン作成ステータスとジョブレポートに関する通知を受け取るメールアドレスを指定します。また、クローン作成ステータスに関する通知を受け取るためのWebhook URLも指定できます。成功通知と失敗通知の両方、またはどちらか一方のみの通知を受け取るかどうかを指定できます。
** *タグ*: 後でリソースグループを検索する際に役立つラベルを1つ以上選択し、「適用」を選択します。例えば、「HR」を複数のリソースグループにタグとして追加すると、後で「HR」タグに関連付けられているすべてのリソースグループを見つけることができます。


. 「 * Create * 」を選択します。
. クローンが作成されると、*インベントリ*ページで確認できます。 image:screen-br-inventory.png["BlueXP backup and recoveryのインベントリ ページのスクリーンショット"]




== クローンを更新する

Microsoft SQL Server ワークロードのクローンを更新できます。クローンを更新すると、ソースワークロードの最新データでクローンが更新されます。これは、クローンをソースワークロードの最新の状態に保ちたい場合に便利です。

データベース名を変更したり、最新のインスタント スナップショットを使用したり、既存の運用スナップショットから更新したりすることができます。

.手順
. BlueXP backup and recoveryメニューから、[クローン] を選択します。
. 更新するクローンを選択します。
. アクションアイコンを選択image:../media/icon-action.png["アクションオプション"] > *クローンを更新*。
+
image:screen-br-sql-clone-refresh-options.png["BlueXP backup and recoveryのクローン オプションを更新します"]

. *詳細設定*セクションを完了します。
+
** *リカバリ範囲*: すべてのログバックアップをリカバリするか、特定の時点までのログバックアップをリカバリするかを選択します。このオプションは、クローンを特定の時点にリカバリする場合に便利です。
** *クローン更新スケジュールと有効期限*: *インスタントクローン*を選択した場合は、クローンの更新を開始する日付を入力します。クローンスケジュールは、クローンが作成されるタイミングを定義します。
+
*** *スケジュールの有効期限が切れたらクローンを削除*: クローンの有効期限が切れたらクローンを削除する場合。
*** *クローン更新間隔*：クローンを更新する頻度を選択します。1時間ごと、1日ごと、1週間ごと、1ヶ月ごと、または3ヶ月ごとに更新できます。このオプションは、クローンをソースワークロードに合わせて最新の状態に保ちたい場合に便利です。


** *iGroup設定*：クローンのigroupを選択します。igroupは、クローンへのアクセスに使用されるイニシエータの論理グループです。既存のigroupを選択するか、新しいigroupを作成できます。プライマリまたはセカンダリのONTAPストレージシステムからigroupを選択してください。
** *プレスクリプトとポストスクリプト*: 必要に応じて、クローン作成の前後に実行するプレクローンスクリプトとポストクローンスクリプトを指定します。これらのスクリプトは、クローンの設定や通知の送信などの追加タスクを実行するために使用できます。
** *通知*: オプションで、クローン作成ステータスとジョブレポートに関する通知を受け取るメールアドレスを指定します。また、クローン作成ステータスに関する通知を受け取るためのWebhook URLも指定できます。成功通知と失敗通知の両方、またはどちらか一方のみの通知を受け取るかどうかを指定できます。
** *タグ*: 後でリソースグループを検索する際に役立つラベルを1つ以上入力します。例えば、複数のリソースグループに「HR」というタグを追加すると、後で「HR」タグに関連付けられているすべてのリソースグループを見つけることができます。


. 続行するには、更新確認ダイアログボックスで「*更新*」を選択します。




== クローンの更新をスキップする

ソースワークロードの最新データでクローンを更新したくない場合は、クローンの更新をスキップすることをお勧めします。クローンの更新をスキップすると、クローンを更新せずにそのままの状態に保つことができます。

.手順
. BlueXP backup and recoveryメニューから、[クローン] を選択します。
. 更新をスキップするクローンを選択します。
. アクションアイコンを選択image:../media/icon-action.png["アクションオプション"] > *更新をスキップ*。
. [更新をスキップする] 確認ダイアログ ボックスで、次の操作を行います。
+
.. 次の更新スケジュールのみをスキップするには、[*次の更新スケジュールのみをスキップ*] を選択します。
.. 続行するには、[スキップ] を選択します。






== クローンを分割する

Microsoft SQL Server ワークロードのクローンを分割できます。クローンを分割すると、クローンから新しいバックアップが作成されます。この新しいバックアップを使用して、ワークロードを復元できます。

クローンを独立したクローンとして分割するか、長期クローンとして分割するかを選択できます。ウィザードには、SVMを構成するアグリゲートのリスト、それらのサイズ、クローンボリュームの保存場所が表示されます。BlueXPのBlueXP backup and recoveryでは、クローンを分割するのに十分なスペースがあるかどうかも表示されます。クローンが分割されると、クローンは保護のために独立したデータベースになります。

クローンジョブは削除されず、他のクローンに再度再利用できます。

.手順
. BlueXP backup and recoveryメニューから、[クローン] を選択します。
. クローンを選択します。
. アクションアイコンを選択image:../media/icon-action.png["アクションオプション"] > *分割クローン*。
+
image:screen-br-sql-clone-split.png["BlueXP backup and recoveryのための分割クローンページ"]

. 分割クローンの詳細を確認し、「分割」を選択します。
. 分割クローンが作成されると、*インベントリ* ページで確認できます。 image:screen-br-inventory.png["BlueXP backup and recoveryのインベントリ ページのスクリーンショット"]




== クローンを削除する

Microsoft SQL Server ワークロードのクローンを削除できます。クローンを削除すると、オブジェクトストアからクローンが削除され、ストレージスペースが解放されます。

クローン がポリシーによって保護されている場合、ジョブを含むクローン が削除されます。

.手順
. BlueXP backup and recoveryメニューから、[クローン] を選択します。
. クローンを選択します。
. アクションアイコンを選択image:../media/icon-action.png["アクションオプション"] > *クローンを削除*。
. クローンの削除確認ダイアログボックスで、削除の詳細を確認します。
+
.. クローンまたはそのストレージにアクセスできない場合でも、クローンされたリソースをSnapCenterから削除するには、[強制削除] を選択します。
.. 「 * 削除」を選択します。


. クローンを削除すると、*インベントリ* ページから削除されます。

