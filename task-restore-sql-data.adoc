---
sidebar: sidebar 
permalink: task-restore-sql-data.html 
keywords: restore, Azure, Amazon Web services, Microsoft SQL Server database 
summary: SQL Server データベースをクラウドからオンプレミスの SnapCenter サーバにリストアできます。 
---
= SQL Server データベースをリストアする
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
SQL Serverデータベースは元の場所にリストアすることも、別の場所にリストアすることもできます。


NOTE: Single File Restore（SFR；単一ファイルのリストア）、ログバックアップのリカバリ、および可用性グループの再シードはサポートされていません。

.手順
. BlueXP UIで、[*保護*>*バックアップとリカバリ*>*アプリケーション*]をクリックします。
. [ * フィルター条件 * ] フィールドで、フィルター * タイプ * を選択し、ドロップダウンから * SQL* を選択します。
. 「 * 詳細表示 * 」をクリックすると、使用可能なすべてのバックアップが表示されます。
. バックアップを選択し、 * リストア * をクリックします。
. [Restore options]ページで、データベースファイルをリストアする場所を指定します。
+
|===
| 状況 | 手順 


 a| 
元の場所にリストアします
 a| 
.. [元の場所にリストア]*を選択します。
.. スナップショットがアーカイブストレージにある場合は、アーカイブストレージからデータをリストアする優先度を選択します。
.. 「 * 次へ * 」をクリックします。




 a| 
別のストレージに一時的にリストアし、リストアしたファイルを元の場所にコピーします
 a| 
.. [元の場所にリストア]*を選択します。
.. スナップショットがアーカイブストレージにある場合は、アーカイブストレージからデータをリストアする優先度を選択します。
.. [保存場所の変更]*を選択します。
+
[ストレージの場所の変更]*を選択した場合は、デスティネーションボリュームにサフィックスを追加できます。このチェックボックスをオンにしていない場合、デフォルトではデスティネーションボリュームに*_restore *が追加されます。

.. 「 * 次へ * 」をクリックします。
.. [ストレージマッピング]ページで、オブジェクトストアからリストアしたデータを一時的に格納する代替ストレージの場所の詳細を指定します。
.. 「 * 次へ * 」をクリックします。




 a| 
別の場所にリストアする
 a| 
.. [別の場所にリストアする]*を選択します。
.. スナップショットがアーカイブストレージにある場合は、アーカイブストレージからデータをリストアする優先度を選択します。
.. 「 * 次へ * 」をクリックします。
.. [Destination host]ページで、ホスト名を選択し、データベース名を指定し（オプション）、インスタンスを選択し、リストアパスを指定します。
+

NOTE: 代替パスに指定するファイル拡張子は、元のデータベースファイルのファイル拡張子と同じにする必要があります。

.. 「 * 次へ * 」をクリックします。




 a| 
別のストレージに一時的にリストアし、リストアしたファイルを別の場所にコピーする
 a| 
.. [別の場所にリストアする]*を選択します。
.. スナップショットがアーカイブストレージにある場合は、アーカイブストレージからデータをリストアする優先度を選択します。
.. [保存場所の変更]*を選択します。
+
[ストレージの場所の変更]*を選択した場合は、デスティネーションボリュームにサフィックスを追加できます。このチェックボックスをオンにしていない場合、デフォルトではデスティネーションボリュームに*_restore *が追加されます。

.. 「 * 次へ * 」をクリックします。
.. [ストレージマッピング]ページで、オブジェクトストアからリストアしたデータを一時的に格納する代替ストレージの場所の詳細を指定します。
.. 「 * 次へ * 」をクリックします。
.. [Destination host]ページで、ホスト名を選択し、データベース名を指定し（オプション）、インスタンスを選択し、リストアパスを指定します。
+

NOTE: 代替パスに指定するファイル拡張子は、元のデータベースファイルのファイル拡張子と同じにする必要があります。

.. 「 * 次へ * 」をクリックします。


|===
. [Pre-operations]*選択で、次のいずれかのオプションを選択します。
+
** [ リストア時に同じ名前でデータベースを上書きする ] を選択して、同じ名前でデータベースをリストアします。
** データベースをリストアし、既存のレプリケーション設定を保持するには、「 * SQL データベースのレプリケーション設定を保持 * 」を選択します。


. [Post-operations]セクションで、追加のトランザクションログをリストアするためのデータベースの状態を指定するには、次のいずれかのオプションを選択します。
+
** 必要なすべてのバックアップを今すぐリストアする場合は、 [* Operational 、 but unavailable] を選択します。
+
これはデフォルトの動作で、コミットされていないトランザクションをロールバックすることでデータベースを使用可能な状態にします。バックアップを作成するまで追加のトランザクションログはリストアできません。

** コミットされていないトランザクションをロールバックせずにデータベースを非稼働状態のままにするには、 [*Non-operational, but available*] を選択します。
+
追加のトランザクションログをリストアできます。データベースはリカバリされるまで使用できません。

** データベースを読み取り専用モードのままにするには、「 * 読み取り専用モード」と「使用可能 * 」を選択します。
+
コミットされていないトランザクションはロールバックされますが、ロールバックされた操作がスタンバイファイルに保存されるため、リカバリ前の状態に戻すことができます。

+
[ ディレクトリを元に戻す ] オプションが有効になっている場合は、さらに多くのトランザクションログがリストアされます。トランザクションログのリストア処理が失敗した場合は、変更をロールバックできます。詳細については、 SQL Server のマニュアルを参照してください。



. 「 * 次へ * 」をクリックします。
. 詳細を確認して、 * リストア * をクリックします。



NOTE: リストア処理が完了しない場合は、ジョブモニタにリストア処理が失敗したことが表示されるまで、リストアプロセスを再試行しないでください。ジョブモニタにリストア処理が失敗したことが表示される前にリストアプロセスを再試行すると、リストア処理は再び失敗します。ジョブモニタのステータスが「Failed」と表示されたら、リストアプロセスを再試行できます。
